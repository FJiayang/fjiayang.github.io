<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    Jenkins 安装配置 | F嘉阳
</title>
<link rel="shortcut icon" href="https://fjiayang.github.io//favicon.ico?v=1579679926111">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://fjiayang.github.io//styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://fjiayang.github.io//media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://fjiayang.github.io/">
                <img class="avatar" src="https://fjiayang.github.io//images/avatar.png?v=1579679926111" alt="">
            </a>
            <div class="site-title">
                <h1>
                    F嘉阳
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            Jenkins 安装配置
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2018-08-26</time>
                            
                                <a href="https://fjiayang.github.io//tag/55CGdWlsfz" class="post-tag i-tag
                            i-tag-warning">
                            #Jenkins
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <h1 id="使用docker安装">使用Docker安装</h1>
<h2 id="基础环境">基础环境</h2>
<p>docker环境<br>
查看docker版本</p>
<pre><code>[root@localhost ~]# docker -v
Docker version 18.06.0-ce, build 0ffa825
</code></pre>
<p>新建用户目录，用户挂载容器存储</p>
<pre><code>useradd jenkins-docker

</code></pre>
<p>运行docker命令</p>
<pre><code>docker run -p 8081:8080 -p 50001:50000  -v /home/jenkins-docker:/var/jenkins_home hub.c.163.com/library/jenkins:latest
</code></pre>
<figure data-type="image" tabindex="1"><a href="https://i.loli.net/2018/08/26/5b824d9100b45.png"><img src="https://i.loli.net/2018/08/26/5b824d9100b45.png" alt="Jenkins40.png"></a></figure>
<p>命令中没有使用后台启动为了查看输出的管理员密码<br>
<a href="https://i.loli.net/2018/08/26/5b8250976f9d7.png"><img src="https://i.loli.net/2018/08/26/5b8250976f9d7.png" alt="Jenkins41.png"></a></p>
<p>若使用了挂载目录也可以在挂载的目录下查看<br>
<a href="https://i.loli.net/2018/08/26/5b82524685344.png"><img src="https://i.loli.net/2018/08/26/5b82524685344.png" alt="Jenkins43.png"></a></p>
<p>访问web界面，输入密码即可<br>
<a href="https://i.loli.net/2018/08/26/5b825097716e7.png"><img src="https://i.loli.net/2018/08/26/5b825097716e7.png" alt="Jenkins42.png"></a></p>
<h1 id="使用原生系统安装">使用原生系统安装</h1>
<h2 id="基础环境-2">基础环境</h2>
<p>CentOS7 1804最小安装</p>
<p>安装基础wget工具<code>yum install -y wget</code><br>
<a href="https://i.loli.net/2018/08/26/5b821cbd19e26.png"><img src="https://i.loli.net/2018/08/26/5b821cbd19e26.png" alt="Jenkins1.png"></a></p>
<h3 id="导入仓库源">导入仓库源</h3>
<pre><code>wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins.io/redhat-stable/jenkins.repo
</code></pre>
<figure data-type="image" tabindex="2"><a href="https://i.loli.net/2018/08/26/5b821cbd15815.png"><img src="https://i.loli.net/2018/08/26/5b821cbd15815.png" alt="Jenkins2.png"></a></figure>
<p>下载并导入仓库的key，用于验证仓库安全性</p>
<pre><code>rpm --import http://pkg.jenkins.io/redhat-stable/jenkins.io.key
</code></pre>
<h3 id="安装java8">安装java8</h3>
<pre><code>yum -y install java
</code></pre>
<p>验证java版本</p>
<pre><code>[root@localhost ~]# java -version
openjdk version &quot;1.8.0_181&quot;
OpenJDK Runtime Environment (build 1.8.0_181-b13)
OpenJDK 64-Bit Server VM (build 25.181-b13, mixed mode)
</code></pre>
<h3 id="关闭防火墙">关闭防火墙</h3>
<pre><code>[root@localhost ~]# systemctl stop firewalld
</code></pre>
<p>关闭防火墙开机启动</p>
<pre><code>[root@localhost ~]# systemctl disable firewalld
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
</code></pre>
<h3 id="关闭强制访问控制安全策略">关闭强制访问控制安全策略</h3>
<pre><code>vi /etc/sysconfig/selinux
</code></pre>
<pre><code># This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=enforcing
# SELINUXTYPE= can take one of three two values:
#     targeted - Targeted processes are protected,
#     minimum - Modification of targeted policy. Only selected processes are protected.
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted
</code></pre>
<pre><code>SELINUX=enforcing
</code></pre>
<p>改成</p>
<pre><code>SELINUX=disabled
</code></pre>
<p>reboot使禁用操作生效</p>
<p>查看操作是否生效</p>
<pre><code>[root@localhost ~]# getenforce
Disabled
</code></pre>
<h2 id="安装jenkins">安装jenkins</h2>
<h3 id="直接安装">直接安装</h3>
<pre><code>yum -y install jenkins
</code></pre>
<p><a href="https://i.loli.net/2018/08/26/5b821cbd1918e.png"><img src="https://i.loli.net/2018/08/26/5b821cbd1918e.png" alt="Jenkins3.png"></a><br>
安装后会自动添加jenkins，此时可以自定义发布用户</p>
<pre><code>[root@localhost ~]# useradd jenkins
useradd：用户“jenkins”已存在
[root@localhost ~]# useradd deploy
</code></pre>
<h3 id="配置">配置</h3>
<p>编辑配置文件</p>
<pre><code>[root@localhost ~]# vi /etc/sysconfig/jenkins 
</code></pre>
<p>将用户改为新建的用户<code>JENKINS_USER=&quot;deploy&quot;</code>，端口号默认为8080<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd19e34.png"><img src="https://i.loli.net/2018/08/26/5b821cbd19e34.png" alt="Jenkins4.png"></a></p>
<p>修改log目录和权限</p>
<pre><code>[root@localhost ~]# chown -R deploy:deploy /var/lib/jenkins
[root@localhost ~]# chown -R deploy:deploy /var/log/jenkins
[root@localhost ~]# chown -R deploy:deploy /var/cache/jenkins
</code></pre>
<h3 id="启动jenkins">启动jenkins</h3>
<pre><code>[root@localhost ~]# systemctl start jenkins
</code></pre>
<p>查看服务是否启动</p>
<pre><code>[root@localhost ~]# ps -ef | grep jenkins
root       1445   1311  0 19:06 pts/0    00:00:00 grep --color=auto jenkins
</code></pre>
<p>或者使用lsof（需要额外安装）</p>
<pre><code>[root@localhost jenkins]# lsof -i:8080
COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
java    1683 deploy  161u  IPv6  24353      0t0  TCP *:webcache (LISTEN)
</code></pre>
<h3 id="访问web界面">访问web界面</h3>
<p>地址为ip:8080<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd1f054.png"><img src="https://i.loli.net/2018/08/26/5b821cbd1f054.png" alt="Jenkins5.png"></a></p>
<p>去提示的目录下查找密码<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd178fd.png"><img src="https://i.loli.net/2018/08/26/5b821cbd178fd.png" alt="Jenkins6.png"></a></p>
<p>安装推荐配置插件<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd1fedb.png"><img src="https://i.loli.net/2018/08/26/5b821cbd1fedb.png" alt="Jenkins7.png"></a></p>
<p>新建管理员用户<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd1c3bc.png"><img src="https://i.loli.net/2018/08/26/5b821cbd1c3bc.png" alt="Jenkins8.png"></a></p>
<p>安装成功<br>
<a href="https://i.loli.net/2018/08/26/5b821cbd127fc.png"><img src="https://i.loli.net/2018/08/26/5b821cbd127fc.png" alt="Jenkins9.png"></a></p>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li><a href="#%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85">使用Docker安装</a>
<ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83">基础环境</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9F%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85">使用原生系统安装</a>
<ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83-2">基础环境</a>
<ul>
<li><a href="#%E5%AF%BC%E5%85%A5%E4%BB%93%E5%BA%93%E6%BA%90">导入仓库源</a></li>
<li><a href="#%E5%AE%89%E8%A3%85java8">安装java8</a></li>
<li><a href="#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99">关闭防火墙</a></li>
<li><a href="#%E5%85%B3%E9%97%AD%E5%BC%BA%E5%88%B6%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5">关闭强制访问控制安全策略</a></li>
</ul>
</li>
<li><a href="#%E5%AE%89%E8%A3%85jenkins">安装jenkins</a>
<ul>
<li><a href="#%E7%9B%B4%E6%8E%A5%E5%AE%89%E8%A3%85">直接安装</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8jenkins">启动jenkins</a></li>
<li><a href="#%E8%AE%BF%E9%97%AEweb%E7%95%8C%E9%9D%A2">访问web界面</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a href="https://blog.fjy8018.top/" target="_blank">F嘉阳 博客</a> | 
  <a class="rss" href="https://fjiayang.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>